<?xml version="1.0" encoding="UTF-8"?>
<project basedir=".." name="SALVADOR.GROOVY" xmlns:artifact="antlib:org.apache.maven.artifact.ant">
    <description>Groovy targets of the Salvador</description>

    <!-- Groovy coordinates, since there are so many versions -->
    <property name="salvador.groovy.group.id" value="org.codehaus.groovy"/>
    <property name="salvador.groovy.artifact.id" value="groovy-all"/>
    <property name="salvador.groovy.version" value="2.1.2"/>
    <property name="salvador.groovy.lib.dir" value="${salvador.base.lib.dir}/groovy"/>
    
    <target name="salvador.groovy.init" depends="salvador.base.init">
        <mkdir dir="${salvador.groovy.lib.dir}"/>
    </target>
    
    <target name="salvador.groovy.clean">
        <delete dir="${salvador.groovy.lib.dir}"/>
    </target>
    
    <target name="salvador.groovy.download" depends="salvador.groovy.init, salvador.base.maven.install">
        <artifact:dependencies filesetId="salvador.groovy.files" pathId="salvador.groovy.classpath">
            <dependency groupId="${salvador.groovy.group.id}" artifactId="${salvador.groovy.artifact.id}" version="${salvador.groovy.version}"/>
        </artifact:dependencies>
        <copy todir="${salvador.groovy.lib.dir}">
            <fileset refid="salvador.groovy.files"/>
            <mapper type="flatten"/>
        </copy>
    </target>
    
    <!-- 
    See: http://groovy.codehaus.org/The+groovy+Ant+Task
    -->
    <target name="salvador.groovy.install" depends="salvador.groovy.download">
        <taskdef name="groovy" classname="org.codehaus.groovy.ant.Groovy" classpathref="salvador.groovy.classpath"/>
    </target>

</project>